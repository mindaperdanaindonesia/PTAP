<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');class Auth extends MX_Controller {			public function __construct(){		parent::__construct();	}			public function index(){		//die(md5('123456'));		$this->page->template('login');		$this->page->view();	}		public function login(){		$username = $this->input->post('username');		$pass 	  = md5($this->input->post('password'));		$q = $this->db->query("select * from user_login where email = '$username' and password = '$pass'");		$row = $q->row();		$count = $q->num_rows();		if($count > 0){			if($row->type!=4){			$qw = $this->db->query("select * from staff where id = '".$row->ref_id."'")->row();				$org_id   = $qw->org_code;				$staff_id = $qw->id;			}else{				$qw = $this->db->query("select * from parent where id = '".$row->ref_id."'")->row();				$org_id   = $row->org_id;				$staff_id = '';			}			$this->session->set_userdata('ref_id',$row->ref_id);			$this->session->set_userdata('staff',$staff_id);			$this->session->set_userdata('org_id',$org_id);			$this->session->set_userdata('email',$username);			$this->session->set_userdata('password',$pass);			$this->session->set_userdata('level',$row->type);			$this->session->set_userdata('name',$qw->name);			redirect('dashboard');		}else{			echo "<script>			alert('Your Username Or Password Is Wrong!');			document.location.href='".base_url()."auth';			</script>";		}	}		public function logout(){		$this->session->destroy();		redirect(base_url()."auth");	}	}/* End of file site.php *//* Location: ./application/controllers/site.php */